<!DOCTYPE html>
<!-- saved from url=(0044)https://community.sophos.com/kb/en-us/133057 -->
<html lang="en" prefix="og: http://ogp.me/ns#"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Sophos XG Firewall v17: How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community</title>
<meta name="GENERATOR" content="Telligent Community 9"><meta property="og:site_name" content="Sophos Community"><script id="twitter-wjs" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/widgets.js"></script><script type="text/javascript" async="" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/dc.js"></script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/jquery.min.js"></script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/telligent.glow.min.js"></script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/jquery.validate.min.js"></script><script type="text/javascript">
// <![CDATA[
try { jQuery.extend(jQuery.validator.messages,{required:'This field is required.',remote:'Please fix this field.',date:'Please enter a valid date.',dateISO:'Please enter a valid date (ISO).',number:'Please enter a valid number.',digits:'Please enter only digits.',creditcard:'Please enter a valid credit card number.',equalTo:'Please enter the same value again.',accept:'Please enter a value with a valid extension.',maxlength:jQuery.validator.format('Please enter no more than {0} characters.'),minlength:jQuery.validator.format('Please enter at least {0} characters.'),rangelength:jQuery.validator.format('Please enter a value between {0} and {1} characters long.'),range:jQuery.validator.format('Please enter a value between {0} and {1}.'),max:jQuery.validator.format('Please enter a value less than or equal to {0}.'),min:jQuery.validator.format('Please enter a value greater than or equal to {0}.')}); } catch(e) { };
// ]]>
</script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/telligent.evolution.min.js"></script><script type="text/javascript">
// <![CDATA[
try { jQuery.telligent.evolution.site.configure({baseUrl:'\/',isRemote:false,remoteUrlEncodePattern:'',datePattern:{
	pattern: '<1-31> <Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec> <0001-9999>',
    yearIndex: 2,
    monthIndex: 1,
    dayIndex: 0,
    hourIndex: -1,
    minuteIndex: -1,
    amPmIndex: -1,
    parseDateOnLoad: true
},dateTimePattern:{
	pattern: '<1-31> <Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec> <0001-9999> <1-12>:<00-59> <AM,PM>',
    yearIndex: 2,
    monthIndex: 1,
    dayIndex: 0,
    hourIndex: 3,
    minuteIndex: 4,
    amPmIndex: 5,
    parseDateOnLoad: true
},timePattern:{
	pattern: '<1-12>:<00-59> <AM,PM>',
    yearIndex: -1,
    monthIndex: -1,
    dayIndex: -1,
    hourIndex: 0,
    minuteIndex: 1,
    amPmIndex: 2,
    parseDateOnLoad: true
},monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],authorizationCookieName:'AuthorizationCookie',defaultErrorMessage:'An error occurred.  Please try again or contact your administrator.',defaultMultiErrorMessagePrefix:'The following errors occurred:  ',silverlightFileUploadEnabled:true,accessingUserId:2101,accessingUserIsSystemAccount:true});
jQuery.extend($.fn.evolutionUserFileTextBox.defaults,{removeText:'Remove',selectText:'Select\/Upload...',noFileText:'No File Selected'});
jQuery.telligent.evolution.navigationConfirmation.configure({message:'Unless you save before leaving this page, you will lose any changes you have made.'});
jQuery.telligent.evolution.validation.registerExtensions({passwordInvalidMessage:'Password contains invalid chars ...',passwordRegex:'^.*$',emailInvalidMessage:'Your email address is invalid.',emailRegex:'^[!$&*\\-=^`|~#%\'\\.\"+\\\/?_{}\\\\a-zA-Z0-9 ]+@[\\-\\.a-zA-Z0-9]+(?:\\.[a-zA-Z0-9]+)+$',usernameInvalidMessage:'Your sign in name does not meet the requirements for this site.',usernameRegex:'^[^<>=()\\\/\\\\!%=.]+$',emailsInvalidMessage:'One or more emails is invalid',urlInvalidMessage:'URL not in correct format',urlRegex:'^((http|https|mailto|mms):|\/|#|~\/)'});
jQuery.extend(jQuery.fn.evolutionLike.defaults,{likeText:'Like',unlikeText:'Unlike',modalTitleText:'People who like this',modalShowMoreText:'Show More',whoLikesOtherText:'<a href=\"{user_profile_url}\" class=\"internal-link view-user-profile\">{user_display_name}<\/a> likes this',whoLikesOtherTwoText:'<a href=\"{user_profile_url}\" class=\"internal-link view-user-profile\">{user_display_name}<\/a> and <span class=\"who-likes\">1 other<\/span> like this',whoLikesOtherMultipleText:'<a href=\"{user_profile_url}\" class=\"internal-link view-user-profile\">{user_display_name}<\/a> and <span class=\"who-likes\">{count} others<\/span> like this',whoLikesAccessingText:'You like this',whoLikesAccessingTwoText:'You and <span class=\"who-likes\">1 other<\/span> like this',whoLikesAccessingMultipleText:'You and <span class=\"who-likes\">{count} others<\/span> like this'});
jQuery.extend(jQuery.fn.evolutionInlineTagEditor.defaults,{editButtonText:'Edit tags',selectTagsText:'Select tags',saveTagsText:'Save',cancelText:'Cancel'});
jQuery.extend(jQuery.fn.evolutionStarRating.defaults,{titles:['Terrible','Poor','Fair','Average','Good','Excellent'],ratingMessageFormat:'Average rating: {rating} out of {count} ratings.'});
jQuery.extend(jQuery.fn.evolutionModerate.defaults,{moderateLinkText:'moderate',reportLinkText:'Report as abusive',reportedLinkText:'Reported as abusive',reportedNotificationMessageText:'{NAME}\'s post has been reported. <strong>Thank you for your feedback.<\/strong>'});
jQuery.extend(jQuery.fn.evolutionBookmark.defaults,{deleteBookmarkText:'Unbookmark {content_type_name}',addBookmarkText:'Bookmark this {content_type_name}',processingText:'...'});
jQuery.extend($.fn.evolutionCodeEditor.defaults,{editorUrl:'\/cfs-file\/__key\/system\/h-00000000700a5234-https-communitysophoscom-443-ace\/ace.js'});
jQuery.extend(jQuery.telligent.evolution.ui.components.forumvotes.defaults,{modalTitleTextThread:'People who had this question',modalTitleTextReply:'People helped by this answer',modalShowMoreText:'People helped by this answer'});
jQuery.extend(jQuery.fn.evolutionFeature.defaults,{editFeatureText:'Edit Feature',addFeatureText:'Feature ',processingText:'...'});
} catch(e) { };
// ]]>
</script><script type="text/javascript">jQuery(function($) {
	$.telligent.evolution.messaging.subscribe('userActionFollowToggle', function(data) {
		var e = $(data.target);
		var userId = e.data('userid'), accessingUserId = e.data('accessinguserid'), v = e.data('follow');
		e.html('...');
		if (v) {
			$.telligent.evolution.post({
				url: $.telligent.evolution.site.getBaseUrl() + 'api.ashx/v2/users/{FollowerId}/following.json',
				data: { FollowerId: accessingUserId, FollowingId: userId },
				dataType: 'json',
				success: function(response) { e.html('Unfollow').data('follow', false); },
				error: function(response) {  e.html('Follow').data('follow', true); }
			});
		} else {
			$.telligent.evolution.del({
				url: $.telligent.evolution.site.getBaseUrl() + 'api.ashx/v2/users/{FollowerId}/following/{FollowingId}.json',
				data: { FollowerId: accessingUserId, FollowingId: userId },
				dataType: 'json',
				success: function(response) { e.html('Follow').data('follow', true); },
				error: function(response) {  e.html('Unfollow').data('follow', false); }
			});
		}
	});
});</script><script type="text/javascript">jQuery(function($) {
	$.telligent.evolution.messaging.subscribe('userActionFriendshipToggle', function(data) {
		var e = $(data.target);
		var userId = e.data('userid'), accessingUserId = e.data('accessinguserid'), v = parseInt(e.data('friendship'));
		var t = e.html();
		e.html('...');
		if (v == 0) {
				e.html(t);
				$.glowModal('/user/requestfriend?UserId=' + userId + '', {width:670,height:390});
		} else if (v == 3) {
				$.telligent.evolution.post({
					url: $.telligent.evolution.site.getBaseUrl() + 'api.ashx/v2/users/{RequestorId}/friends.json',
					data: { RequestorId: accessingUserId, RequesteeId: userId, RequestMessage: ' '},
					dataType: 'json',
					success: function(response) { window.location = window.location; },
					error: function(response) {  e.html(t); }
				});
		} else if (v == 1 || v == 2 || v == 4) {
			if (v == 4 || (v == 1 && window.confirm('Are you sure you want to cancel this friendship request?')) || (v == 2 && window.confirm('Are you sure you want to unfriend this person?'))) {
				$.telligent.evolution.del({
					url: $.telligent.evolution.site.getBaseUrl() + 'api.ashx/v2/users/{RequestorId}/friends/{RequesteeId}.json',
					data: { RequestorId: accessingUserId, RequesteeId: userId },
					dataType: 'json',
					success: function(response) { window.location = window.location; },
					error: function(response) {  e.html(t); }
				});
			} else { e.html(t); }
		}
	});
});</script><script type="text/javascript">
(function($){
$.extend($.fn.evolutionUpDownVoting.defaults,{voteDownMessage:'Vote against this idea',voteUpMessage:'Vote for this idea',loginMessage:'Sign in to vote on ideas',noPermissionMessage:'You do not have permission to vote for this idea',notGroupMemberMessage:'Join this group to vote on this idea',deleteMessage:'Remove your vote for this idea',readOnlyMessage: 'Voting on this idea has been disabled',switchToDownVoteMessage: 'Vote against this idea instead of for it',switchToUpVoteMessage: 'Vote for this idea instead of against it' });}(jQuery));
</script>
<script type="text/javascript">(function($){ $.telligent.evolution.media.defaults.endpoint = 'https://community.sophos.com/callback.ashx?__type=Telligent.Evolution.Api.Plugins.Endpoints.FileViewerEndpoint%2C%20Telligent.Evolution.Api'; }(jQuery));</script><script type="text/javascript">(function($){ $.telligent.evolution.preview.defaults.endpoint = 'https://community.sophos.com/callback.ashx?__type=Telligent.Evolution.Api.Plugins.Endpoints.WebPreviewEndpoint%2C%20Telligent.Evolution.Api'; }(jQuery));</script><script type="text/javascript">(function($){ $.fn.evolutionComposer.plugins.mentions.defaults.mentionablesEndpoint = 'https://community.sophos.com/callback.ashx?__type=Telligent.Evolution.Api.Plugins.Endpoints.MentionablesEndpoint%2C%20Telligent.Evolution.Api'; }(jQuery));</script><script type="text/javascript">(function($){ $.telligent.evolution.language.defaults.dateEndpoint = 'https://community.sophos.com/callback.ashx?__type=Telligent.Evolution.Api.Plugins.Endpoints.DateFormattingEndpoint%2C%20Telligent.Evolution.Api'; }(jQuery));</script><script type="text/javascript">(function($){ $.fn.evolutionUserFileTextBox.defaults.endpoint = 'https://community.sophos.com/callback.ashx?__type=Telligent.Evolution.Api.Plugins.Endpoints.UserFileTextBoxEndpoint%2C%20Telligent.Evolution.Api'; }(jQuery));</script><script type="text/javascript">
if (window === window.top) {
	jQuery(document).ready(function(j){
		var redirected = false;
		var ensureLoggedIn = function(){
			if (!redirected) {
				var hashData = jQuery.telligent.evolution.url.hashData();
				if (hashData._cptype){
					redirected = true;
					window.location = jQuery.telligent.evolution.url.modify({
						url:'/login?ReturnUrl=%2Fkb%2Fen-us%2F133057',
						query: {
							ReturnUrl:window.location+''
						},
						hash: ''
					});
				}
			}
		};
		jQuery(window).on('hashchange', function(){
			ensureLoggedIn();
		});
		ensureLoggedIn()
	});
}
</script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/WebResource.axd"></script><link rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/platform.less" media="screen">
          
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
<link rel="shortcut icon" type="image/ico" href="https://community.sophos.com/cfs-filesystemfile/__key/themefiles/s-fd-3fc3f82483d14ec485ef92e206116d49-files/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://community.sophos.com/cfs-filesystemfile/__key/themefiles/s-fd-3fc3f82483d14ec485ef92e206116d49-files/favicon152.png">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="https://community.sophos.com/cfs-filesystemfile/__key/themefiles/s-fd-3fc3f82483d14ec485ef92e206116d49-files/favicon144.png">
        <link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/screen.less"><!--[if gte IE 9]--><link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/print.css" media="print"><!--[endif]--><!--[if gte IE 9]--><link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/handheld.less" media="only screen and (max-width: 570px)"><!--[endif]--><!--[if gte IE 9]--><link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/tablet.less" media="only screen and (min-device-width: 571px) and (max-device-width: 1024px) and (orientation: landscape), only screen and (min-device-width: 571px) and (max-device-width: 1024px) and (orientation: portrait)"><!--[endif]--><link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/sophosCustom.css"><link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/analyticswidget.css"><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/theme.js"></script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/paging.js"></script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/analytics.js"></script><script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/crtSearch.js"></script>
          <link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/dynamic-style" media="screen,print">
        
          
        
          <link type="text/css" rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/dynamic-style(1)" media="screen,print">
        <!-- Start Marketing GA Tracking -->
<script type="text/javascript">
/*
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){var f=/\+/g;function d(i){return b.raw?i:encodeURIComponent(i)}function c(i){return b.raw?i:decodeURIComponent(i)}function h(i){return d(b.json?JSON.stringify(i):String(i))}function e(j){if(j.indexOf('"')===0){j=j.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{j=decodeURIComponent(j.replace(f," "))}catch(i){return}try{return b.json?JSON.parse(j):j}catch(i){}}function g(j,i){var k=b.raw?j:e(j);return a.isFunction(i)?i(k):k}var b=a.cookie=function(o,w,r){if(w!==undefined&&!a.isFunction(w)){r=a.extend({},b.defaults,r);if(typeof r.expires==="number"){var m=r.expires,v=r.expires=new Date();v.setDate(v.getDate()+m)}return(document.cookie=[d(o),"=",h(w),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join(""))}var u=o?undefined:{};var k=document.cookie?document.cookie.split("; "):[];for(var n=0,p=k.length;n<p;n++){var s=k[n].split("=");var q=c(s.shift());var j=s.join("=");if(o&&o===q){u=g(j,w);break}if(!o&&(j=g(j))!==undefined){u[q]=j}}return u};b.defaults={};a.removeCookie=function(i,j){if(a.cookie(i)!==undefined){a.cookie(i,"",a.extend({},j,{expires:-1}));return true}return false}}));eval(function(h,b,d,g,f,i){f=function(a){return a.toString(b)};if(!"".replace(/^/,String)){while(d--){i[f(d)]=g[d]||f(d)}g=[function(a){return i[a]}];f=function(){return"\\w+"};d=1}while(d--){if(g[d]){h=h.replace(new RegExp("\\b"+f(d)+"\\b","g"),g[d])}}return h}('2 4(a){a=a.3(/[\\[]/,"\\\\\\[").3(/[\\]]/,"\\\\\\]");0 b="[\\\\?&]"+a+"=([^&#]*)";0 c=o h(b);0 d=c.m(l.n.i);6(d==5){8""}j{8 k(d[1].3(/\\+/g," "))}}2 e(){0 a=4(\'9\');6($.7(\'f\')==5){0 a=4(\'9\');6(a!=""){$.7(\'f\',a,{p:5,q:\'/\',r:\'.s.t\'})}}}$(u).v(2(){e()});',32,32,"var||function|replace|getParameterByName|null|if|cookie|return|id|||||readReferralAndWriteToCookie|SOPHOS_PARTNERID||RegExp|href|else|decodeURIComponent|window|exec|location|new|expires|path|domain|sophos|com|document|ready".split("|"),0,{}));function setDefaultCampaignId(){$.cookie("CampaignID","0",{expires:180,path:"/",domain:".sophos.com"})}function readCampaignAndWriteToCookie(){var b=getParameterByName("cmp");if(b!=""){var c=new RegExp(/^[a-zA-Z0-9]+$/);var d=c.exec(b);if(d!=null&&d!="0"){$.cookie("CampaignID",b,{expires:180,path:"/",domain:".sophos.com"})}else{if($.cookie("CampaignID")==null){setDefaultCampaignId()}}}else{if($.cookie("CampaignID")==null){setDefaultCampaignId()}}}
</script>



<script type="text/javascript">

if (typeof readCampaignAndWriteToCookie== 'function') { 
  readCampaignAndWriteToCookie(); 
}

function GetCookie(k){return(document.cookie.match('(^|; )'+k+'=([^;]*)')||0)[2]}
var campaignId = GetCookie('CampaignID');

var _gaq = _gaq || []; 
_gaq.push(
['_setAccount', 'UA-737537-1'],
['_setDomainName', '.sophos.com'],
['_setAllowLinker', true],
['_setAllowHash', false],
['_setCustomVar', 4, 'CampaignID', campaignId, 3],
['_trackPageview', '/community'+window.location.pathname+window.location.search],
['o._setAccount', 'UA-737537-18'],
['o._setDomainName', '.sophos.com'],
['o._setAllowLinker', true],
['o._setAllowHash', false],
['o._setCustomVar', 4, 'CampaignID', campaignId, 3],
['o._trackPageview', '/community'+window.location.pathname+window.location.search]
);


(function() {
var ga = document.createElement('script');
ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>



<script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/nonhtmltracking.js"></script>

<script src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/gainjectmin.js" type="text/javascript"></script>
<script type="text/javascript">
/* Instantiate and execute */
$(function () {
    window.sophosGaGuidStore.processGaToken({
        useGoogleVid: true,
        gaScope: 1,
        gaNamespace: 'o',
        gaAccount: 'UA-737537-18'
    });
});
</script>

<!-- End Marketing GA Tracking -->

<script charset="utf-8" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/moment_timeline_tweet.6e5b62723488aee38af0c77681396a5b.js"></script><script charset="utf-8" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/timeline.4c6ab682148a0366f9efb1647a3f4799.js"></script></head>
<body spellcheck="true" style="padding-top: 132px;"><form name="ctl01" method="post" action="https://community.sophos.com/kb/en-us/133057" id="ctl01" novalidate="novalidate">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="ZVPl0BCnthzI0Wv85RSKHtuG6FH7fKirflX2a4deyTth1EavpNaZ2r3TPwnsNBh/AGvlpA==">
</div>


<script src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/WebResource(1).axd" type="text/javascript"></script>
<script src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/WebResource(2).axd" type="text/javascript"></script>
<script src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/WebResource(3).axd" type="text/javascript"></script>
<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="C21772F6">
</div><div class="header-fragments-header"></div>
<div class="single-column header-fragments" style="display: none;"></div><div class="header-fragments evolution-reflow-container" id="ctl02_ctl01_page"><div class="layout">
<div class="layout-header"></div>
<div class="layout-content header-top-content with-adaptable-elements scrolled" id="ctl02_ctl01_layout" style="visibility: visible; position: fixed; top: 0px; z-index: 10;">
<div class="layout-region header" id="ctl02_ctl01_header" style="position: fixed; top: 0px; z-index: 10;">
<div class="layout-region-inner header"><div class="content-fragment raw-html no-wrapper responsive-1" id="header-906">
<div class="content-fragment-content">
<div class="user-defined-markup"><link rel="stylesheet" href="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/alert_banner.css">



<div class="amber_alert">

<p class="sophos_banner">

<!--banner message that will appear must be BELOW this-->

Sophos Central Endpoint and SEC: Computers fail/hang on boot after the Microsoft Windows April 9, 2019 update. Please follow <a href="https://community.sophos.com/kb/en-us/133945" target="_blank">knowledge base article 133945 </a>

<!--banner message that will appear must be ABOVE this--></p>

</div>

<div class="green_alert">

<p class="sophos_banner">

<!--banner message that will appear must be BELOW this-->

Learn about the <a href="https://sophos.com/kb/133863"> Benefits of Multi-Factor Authentication (MFA)</a>. Turn your MFA on now!

<!--banner message that will appear must be ABOVE this--></p>

</div>
</div></div>
<div class="content-fragment-footer"></div>
</div>
<div class="content-fragment site-banner no-wrapper responsive-1" id="header-373">
<div class="content-fragment-content">












<div class="banner site " id="header-373_banner">

	<div class="avatar">
													<a href="https://community.sophos.com/" title="Home" class="ui-tip">
				<img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/Sophos-Comunity-Beta-Logo-White.png-250x88.png" border="0px" style="max-width:125px;max-height:44px;">
			</a>
			</div>

      <div class="name hidden">Sophos Community</div>
  
	    
	<fieldset class="search" id="header-373_searchFields">
		<ul class="field-list">
			<li class="field-item">
				<span class="field-item-description hidden">
					<label>Search</label>
				</span>
				<span class="field-item-input">
					<input autocomplete="off" type="search" placeholder="Search" id="header-373_Search" value="">
				</span>
			</li>
		</ul>
	</fieldset>

					<div class="navigation-list user-links" id="header-373_bannerLinks">
				<ul>
																																																		<li class="navigation-list-item">
							<a href="https://community.sophos.com/login?ReturnUrl=%2Fkb%2Fen-us%2F133057" class="ui-tourtip internal-link user with-icon ui-tip" data-tourtipkey="t;3jKTKnob3UW7beARY8Fmyg;uqnDnB3wREIoDPKHxPAQqg" data-tourtipmessage="Sign in or Join the community." title="Join or Sign In">User</a>
						</li>
																																									    <li class="navigation-list-item">
					<a href="https://community.sophos.com/kb/122481" title="Help" class="help">Help</a>
				</li>
				</ul>
			</div>
	
	<div class="navigation-list handheld">
		<ul>
			<li class="navigation-list-item">
				<a href="https://community.sophos.com/kb/en-us/133057#" class="site" id="header-373_handheldSiteLinksLink">Site</a>
			</li>
			<li class="navigation-list-item">
				<a href="https://community.sophos.com/kb/en-us/133057#" class="search" id="header-373_handheldSearchFieldsLink">Search</a>
			</li>
			<li class="navigation-list-item">
															<a href="https://community.sophos.com/login?ReturnUrl=%2Fkb%2Fen-us%2F133057" class="user">User</a>
												</li>
		</ul>
	</div>
	<div class="container handheld">
		<fieldset class="search" style="display:none" id="header-373_handheldSearchFields"></fieldset>
		<div class="user-links" style="display:none" id="header-373_handheldBannerLinks"></div>
	</div>

</div>


			</div>
<div class="content-fragment-footer"></div>
</div>
</div>
</div>
<div class="layout-region content" id="ctl02_ctl01_content">
<div class="layout-region-inner content"><div class="content-fragment navigation-custom no-wrapper responsive-1" id="header-500">
<div class="content-fragment-content">



	


			<div class="navigation-list links" id="header-500_container" data-minlinks="0" data-direction="horizontal" data-maxlinks="3" style="display: block; overflow: hidden; height: 48px;"><div class="container" style="overflow: auto hidden; height: 68px;"><ul style="list-style: none; padding: 0px; margin: 0px; overflow: hidden; width: 1040px; visibility: visible;"><li class="navigation-list-item" style="display: inline;"><a href="https://community.sophos.com/p/all-groups" style="float: left;">All Groups</a></li><li class="navigation-list-item" style="display: inline;"><a href="https://community.sophos.com/kb" style="float: left;">Knowledge Base</a></li><li class="navigation-list-item" style="display: inline;"><a href="https://community.sophos.com/products/b/sophos-community-blog" style="float: left;">Blog</a></li></ul></div></div>
					</div>
<div class="content-fragment-footer"></div>
</div>
<div id="header-375"></div>
<div class="content-fragment group-banner no-wrapper responsive-1" id="header-376">
<div class="content-fragment-content">










<div class="banner context  ">
	<div class="avatar">
        <a href="https://community.sophos.com/kb">
			  <img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/kb.png-68x68x2.png">
		  </a>
    	</div>

	  
      
  
  
		


        <h1 class="name">
		  <a href="https://community.sophos.com/kb"><span>Knowledge Base</span></a>
	  </h1>
  
	
  	
					
	</div>
			</div>
<div class="content-fragment-footer"></div>
</div>
</div>
</div>
</div>
<div class="layout-footer"></div>
</div></div><div class="header-fragments-footer"></div><div class="single-column content-fragment-page kb-view" style="display: none;"></div><div class="content-fragment-page kb-view evolution-reflow-container" id="ctl02_ctl02_page"><div class="layout">
<div class="layout-header"></div>
<div class="layout-content sidebar-left-content-right" id="ctl02_ctl02_layout">
<div class="layout-region left-sidebar" id="ctl02_ctl02_left-sidebar" style="position: relative;">
<div class="layout-region-inner left-sidebar"><div class="content-fragment topic-tree no-wrapper with-spacing responsive-1" id="fragment-952" style="overflow: auto; max-height: 768.5px;">
<div class="content-fragment-content">

      

<div id="fragment-952_hierarchy">
																							<div class="hierarchy-children">
						<ul class="hierarchy-list">
											<li data-topicid="1214">
			<div class="hierarchy-item without-children">
								<a href="https://community.sophos.com/kb?TopicId=1214">Advisories</a>
				</div>
									</li>
				<li data-topicid="10287">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=10287"><span class="expand-collapse collapsed">+</span>CyberoamOS</a>
					</div>
													</li>
				<li data-topicid="10002">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=10002"><span class="expand-collapse collapsed">+</span>Data Control and DLP</a>
					</div>
													</li>
				<li data-topicid="1290">
			<div class="hierarchy-item without-children">
								<a href="https://community.sophos.com/kb?TopicId=1290">Email Appliance</a>
				</div>
									</li>
				<li data-topicid="1462">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=1462"><span class="expand-collapse collapsed">+</span>Endpoint Security and Control</a>
					</div>
													</li>
				<li data-topicid="6900">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=6900"><span class="expand-collapse collapsed">+</span>Free Tools</a>
					</div>
													</li>
				<li data-topicid="1035">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=1035"><span class="expand-collapse collapsed">+</span>General</a>
					</div>
													</li>
				<li data-topicid="2350">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=2350"><span class="expand-collapse collapsed">+</span>Mobile</a>
					</div>
													</li>
				<li data-topicid="1023">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=1023"><span class="expand-collapse collapsed">+</span>PureMessage</a>
					</div>
													</li>
				<li data-topicid="10262">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=10262"><span class="expand-collapse collapsed">+</span>Reflexion</a>
					</div>
													</li>
				<li data-topicid="1376">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=1376"><span class="expand-collapse collapsed">+</span>SafeGuard encryption</a>
					</div>
													</li>
				<li data-topicid="2300">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=2300"><span class="expand-collapse collapsed">+</span>Server protection</a>
					</div>
													</li>
				<li data-topicid="9000">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=9000"><span class="expand-collapse collapsed">+</span>Sophos Central</a>
					</div>
													</li>
				<li data-topicid="10261">
			<div class="hierarchy-item without-children">
								<a href="https://community.sophos.com/kb?TopicId=10261">Sophos Clean</a>
				</div>
									</li>
				<li data-topicid="9450">
			<div class="hierarchy-item without-children">
								<a href="https://community.sophos.com/kb?TopicId=9450">Sophos Home</a>
				</div>
									</li>
				<li data-topicid="2450">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=2450"><span class="expand-collapse collapsed">+</span>Sophos UTM 9</a>
					</div>
													</li>
				<li data-topicid="1293">
			<div class="hierarchy-item without-children">
								<a href="https://community.sophos.com/kb?TopicId=1293">Web Appliance</a>
				</div>
									</li>
				<li data-topicid="10001">
			<div class="hierarchy-item with-children">
													<a href="https://community.sophos.com/kb?TopicId=10001"><span class="expand-collapse collapsed">+</span>XG Firewall</a>
					</div>
																</li>
				</ul>
			</div>
			</div>


</div>
<div class="content-fragment-footer"></div>
</div>
<div class="content-fragment raw-html no-wrapper with-spacing responsive-1" id="fragment-953">
<div class="content-fragment-content">
<div class="user-defined-markup"><div class="twitter-feed">
<iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-timeline twitter-timeline-rendered" style="position: static; visibility: visible; display: inline-block; width: 520px; padding: 0px; border: none; max-width: 100%; min-width: 180px; margin-top: 0px; margin-bottom: 0px; height: 678.75px;" data-widget-id="profile:SophosSupport" title="Twitter Timeline" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/saved_resource.html"></iframe>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
</div></div></div>
<div class="content-fragment-footer"></div>
</div>
</div>
<div class="layout-region-inner left-sidebar" visibility="hidden" style="display: none;"></div></div>
<div class="layout-region content" id="ctl02_ctl02_content">
<div class="layout-region-inner content"><div id="fragment-954"></div>
<div class="content-fragment article-view no-wrapper with-spacing responsive-1" id="fragment-955">
<div class="content-fragment-content">


<div class="content full">
<h3 class="name">Sophos XG Firewall v17: How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway</h3>
<ul class="article-meta">
    <li><span class="meta-title">Article ID:</span> 133057</li>
    <li><span class="meta-title">Updated:</span> 8 Nov 2018</li>
    <li><span class="meta-helpful">0 people found this helpful</span></li>
</ul>
<ul class="article-languages">
        <li><span class="meta-title">Available in:</span>
                            <a href="https://community.sophos.com/kb/en-US/133057">English</a> 
                |
                            <span>Español</span>
                |
                            <span>Italiano</span>
                |
                            <a href="https://community.sophos.com/kb/ja-JP/133057">日本語</a> 
                |
                            <span>Français </span>
                |
                            <span>Deutsch</span>
            </li>
</ul>
<div class="content">
<div class="kb-content"><h1>Overview</h1> <p>This article describes the steps to configure an IPsec connection between the Sophos XG v17 and an AWS Virtual Private Gateway.</p> <p><strong>Note: </strong>Sophos XG Firewall supports only policy based VPN currently and there is a limitation of one Security Association (SA) for policy-based VPN devices on the AWS Virtual Network Gateway. This is one of the reasons why we recommend using an enterprise solution like the <a href="https://www.sophos.com/en-us/medialibrary/PDFs/documentation/SophosUTMAWS.pdf" target="_blank">Sophos UTM as your VPN endpoint in AWS</a>. For more information about this limitations, read <a href="https://aws.amazon.com/vpc/faqs/" target="_blank">Amazon VPC FAQs</a>.&nbsp;</p> <p> The following sections are covered:</p> <ul>     <li><a href="https://community.sophos.com/kb/en-us/133057#Set%20the%20AWS%20side">Set the AWS side</a><br>     </li>     <li><a href="https://community.sophos.com/kb/en-us/133057#Set%20the%20On-Premise%20XG%20Firewall">Set the On-Premise XG Firewall</a></li>     <li><a href="https://community.sophos.com/kb/en-us/133057#Test%20the%20traffic%20flow">Test the traffic flow</a> </li>     <li><a href="https://community.sophos.com/kb/en-us/133057#Test%20the%20VPN%20failover%20and%20failback">Test the VPN failover and failback</a></li>     <li><a href="https://community.sophos.com/kb/en-us/133057#related%20information">Related information</a></li>     <li><a href="https://community.sophos.com/kb/en-us/133057#feedback%20and%20contact">Feedback and contact</a></li> </ul> <p><strong>Applies to the following Sophos products and versions</strong><br> Sophos Firewall</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG to AWS VPN.png" style="width: 700px; height: 601px;"></p> <h1><a id="what to do" name="what to do"></a><a name="Set the AWS side" id="Set the AWS side"></a>Set the AWS side</h1> <h2>Create VPC and subnet</h2> <p>From AWS console, go to <strong>VPC Dashboard &gt; Your VPCs</strong> and select <strong>Create VPC</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_2_2.png" style="width: 700px; height: 315px;"></p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_3.png" style=""></p> <p style="">Go to <strong>Subnets </strong>and select <strong>Create subnet</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_4.png" style="width: 700px; height: 249px;"></p> <p style="">Select the VPC created earlier.&nbsp;&nbsp;</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_5.png" style="width: 700px; height: 426px;"></p> <h2>Deploy an EC2 instance into the VPC</h2> <p>Go to <strong>EC2 Dashboard </strong>and click on <strong>Launch Instance</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_6.png" style="width: 700px; height: 316px;"></p> <p style="">Select an instance and follow the Wizard.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_7.png" style="width: 700px; height: 262px;"></p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_8.png" style="width: 700px; height: 408px;"></p> <p style="">Select the VPC and subnet created earlier and set a static IP address to your instance.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_9.png" style="width: 700px; height: 718px;"></p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_10.png" style="width: 700px; height: 456px;"></p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_11.png" style="width: 700px; height: 458px;"></p> <p style="">Allow ICMP to this instance to test the IPsec VPN traffic later.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_12.png" style="width: 700px; height: 496px;"></p> <p style="">Select your existing key pair (or create a new if you do not have one) and click on <strong>Launch Instances</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_13.png" style="width: 700px; height: 496px;"></p> <h2>Create the Virtual Private Gateway (VGW) and connect it to the VPC</h2> <p style="">Go to<strong> VPC Dashboard &gt; Virtual Private Gateway</strong> and click on <strong>Create Virtual Private Gateway</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_14.png" style=""></p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_15.png" style="width: 700px; height: 310px;"></p> <p style="">Select the recently created VGW and attach it to the previously created VPC.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_16.png" style="width: 700px; height: 203px;"></p> <p style="margin-left: 40px;">&nbsp;<img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_17.png" style="width: 700px; height: 288px;"></p> <h2>Configure routing</h2> <p>Go to <strong>VPC Dashboard &gt; Route Tables</strong> and select the routing table attached to your recently created VPC, then go to the <strong>Routes</strong> tab and click <strong>Edit</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_28.png" style="width: 700px; height: 281px;"></p> <p style="">Click on <strong>Add another route</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_29.png" style="width: 700px; height: 314px;"></p> <p style="">Add the subnet behind the XG Firewall (192.168.0.0/16) in the <strong>Destination </strong>field and select your recently created VGW. click <strong>Save</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_30.png" style="width: 700px; height: 339px;"></p> <h2>Create the Customer Gateway (CGW)</h2> <p>The CGW is the XG's public IP address. Go to <strong>VPC Dashboard &gt; Customer Gateways</strong> and click on <strong>Create Customer Gateway</strong>.&nbsp;</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_18.png" style=""></p> <p style="margin-left: 40px;">&nbsp;<img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_19.png" style="width: 700px; height: 377px;"></p> <h2>Connect VGW to CGW using a VPN connection</h2> <p>Go to<strong> VPC Dashboard &gt; VPN Connections</strong> and click on <strong>Create VPN Connection</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_20.png" style=""></p> <p style="">Select the <strong>Virtual Private Gateway</strong> and the <strong>Customer Gateway ID</strong> created earlier and set the<strong> Static IP Prefixes</strong> to the internal subnet behind the XG Firewall. Click <strong>Create VPN Connection</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_21.png" style="width: 700px; height: 778px;"></p> <p style="">Once the tunnels created, go to <strong>Tunnel Details</strong> and note the two Public IP addresses that we will use when configuring the XG Firewall.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_27.png" style="width: 700px; height: 423px;"></p> <h2>Download and extract information from the generic configuration file&nbsp;</h2> <p>Select the recently created VPN connection and click <strong>Download Configuration</strong>.&nbsp;</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_22.png" style="width: 700px; height: 227px;"></p> <p style="">Select <strong>Generic </strong>for <strong>Vendor </strong>and click <strong>Download</strong>.&nbsp;</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_23.png" style="width: 700px; height: 383px;"></p> <p style="">The downloaded file should have two IPsec tunnels configuration, use the information about the IKE version, pre-shared key, authentication algorithm, encryption algorithm, lifetime, Diffie-Hellman Group, etc... to match the IPsec tunnels configuration in the XG Firewall.</p> <p style="">It should look like this:</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_24.png" style="width: 700px; height: 777px;"></p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_25.png" style="width: 700px; height: 754px;"></p> <h1><a name="Set the On-Premise XG Firewall" id="Set the On-Premise XG Firewall"></a>Set the On-Premise XG Firewall</h1> <h2>Create an IPsec policy</h2> <p>Go to <strong>VPN &gt; IPsec Policies</strong> and click <strong>Add</strong>. Make sure that the settings below matches the settings in AWS.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/aws_26.png" style="width: 700px; height: 798px;"></p> <p>Go to <strong>VPN &gt; IPsec Connections</strong> and click <strong>Add&nbsp;</strong>to create two <strong>IPsec Connections</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_2.png" style="width: 700px; height: 969px;"></p> <p style="">Clone the IPsec connection and change the Pre-shared Key (found in the configuration file downloaded from AWS) and AWS public IP to create the second IPsec connection.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_3.png" style="width: 700px; height: 196px;"></p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_4.png" style="width: 700px; height: 862px;"></p> <p style="">Click on&nbsp;<img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/icon.png" style="">&nbsp;icon to connect the IPsec connections.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_5.png" style="width: 700px; height: 208px;"></p> <p style="">Both IPsec connections should come UP.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_6_6.png" style="width: 700px; height: 234px;"></p> <p style="">Go to <strong>VPN &gt; IPsec Connctions &gt; Failover group</strong> and click <strong>Add</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_7.png" style="width: 700px; height: 762px;"></p> <p style="">Click on&nbsp;<img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/icon.png" style="">icon to enable the <strong>Failover group</strong>.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_8.png" style="width: 700px; height: 412px;"></p> <h1><a name="Test the traffic flow " id="Test the traffic flow"></a>Test the traffic flow&nbsp;</h1> <p>From a machine behind the XG Firewall in the 192.168.0.0/16 subnet, ping the Linux machine in the AWS at 10.10.1.45.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/ping_1.png" style=""></p> <p style="">Go to <strong>Firewall </strong>and verify ingress and egress VPN traffic through the first active IPsec tunnel.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/firewall_traffic.png" style="width: 700px; height: 183px;"></p> <h1><a name="Test the VPN failover and failback" id="Test the VPN failover and failback"></a>Test the VPN failover and failback</h1> <p>When the primary IPsec connection goes down, the traffic fails over the second IPsec connection. Go to <strong>VPN &gt; IPsec connections</strong> and verify that the second IPsec connection took over the VPN traffic.</p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_VPN.png" style="width: 700px; height: 196px;"></p> <p style="">When&nbsp;the primary IPsec connection goes back UP, the traffic should fail back to the primary IPsec connection. </p> <p style="margin-left: 40px;"><img src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/XG_VPN_2.png" style="width: 700px; height: 196px;"></p> <h1><a id="related information" name="related information"></a>Related information</h1> <ul>     <li><a href="https://community.sophos.com/kb/en-us/127546" target="_blank">Sophos XG Firewall v17: How to establish a Site-to-Site IPsec VPN to Microsoft Azure</a><br>     </li> </ul> <h1><a id="feedback and contact" name="feedback and contact"></a>Feedback and contact</h1> <p>If you've spotted an error or would like to provide feedback on this article, please use the section below to rate and comment on the article.<br> This is invaluable to us to ensure that we continually strive to give our customers the best information possible.</p></div>
</div>

<div class="article-topics">
    Article appears in the following topics
    <ul>
                            <li>
                                                            <a href="https://community.sophos.com/kb?TopicId=10001">XG Firewall</a>
                                        &gt;
                                                            <a href="https://community.sophos.com/kb?TopicId=10218">Sophos Firewall</a>
                                        &gt;
                                                            <a href="https://community.sophos.com/kb?TopicId=10225">System</a>
                                        &gt;
                                                            <a href="https://community.sophos.com/kb?TopicId=10236">VPN</a>
                                        &gt;
                                                            <a href="https://community.sophos.com/kb?TopicId=10251">Interoperability</a>
                                </li>
            </ul>
</div>
</div>
</div>
<div class="content-fragment-footer"></div>
</div>
<div class="content-fragment article-feedback no-wrapper with-spacing responsive-1" id="fragment-956">
<div class="content-fragment-content">



<fieldset>
  <h2>Did this article provide the information you were looking for?</h2>
  <p>Every comment submitted here is read (by a human) but we do not reply to specific technical questions. For technical support <a href="https://community.sophos.com/r?5">post a question</a> to the community. Or <a href="https://www.sophos.com/en-us/support/feature-requests.aspx" target="_blank">click here</a> for new feature/product improvements.  Alternatively for <strong>paid/licensed</strong> products <a href="https://www.sophos.com/en-us/support/contact-support.aspx" target="_blank">open a support ticket</a>.</p>
  <ul class="field-list">
		<li class="field-item feedback-options">
      <label><input type="radio" name="YesNo" id="fragment-956_yes" value="Yes">Yes</label>
      <label><input type="radio" name="YesNo" id="fragment-956_no" value="No">No</label>
    </li>
    <li class="field-item feedback-comments">
      <label for="fragment-956_body" class="field-item-name">Comment</label>
			<span class="field-item-input">
				<textarea name="fragment-956_body" id="fragment-956_body"></textarea>
			</span>
      <span class="field-item-validation" style="display: none;"></span>
    </li>
    <li class="field-item submit">
			<span class="field-item-input">	
				<a href="https://community.sophos.com/kb/en-us/133057#" class="button" id="fragment-956_submit">
						Submit
				</a>
				<span class="processing" style="visibility: hidden;"></span>
			</span>
		</li>
</ul></fieldset>

</div>
<div class="content-fragment-footer"></div>
</div>
</div>
</div>
</div>
<div class="layout-footer"></div>
</div></div><div class="footer-fragments-header"></div>
<div class="single-column footer-fragments" style="display: none;"></div><div class="footer-fragments evolution-reflow-container" id="ctl02_ctl03_page"><div class="layout">
<div class="layout-header"></div>
<div class="layout-content content" id="ctl02_ctl03_layout">
<div class="layout-region content" id="ctl02_ctl03_content">
<div class="layout-region-inner content"><div class="content-fragment user-hover no-wrapper with-spacing responsive-1" id="footer-717">
<div class="content-fragment-content">
<!-- Return to Top -->
<a href="javascript:" id="return-to-top" style="display: none;"><i class="icon-chevron-up"></i></a>

<script type="text/javascript">
// ===== Scroll to Top ==== 
$(window).scroll(function() {
    if ($(this).scrollTop() >= 50) {        // If page is scrolled more than 50px
        $('#return-to-top').fadeIn(200);    // Fade in the arrow
    } else {
        $('#return-to-top').fadeOut(200);   // Else fade out the arrow
    }
});
$('#return-to-top').click(function() {      // When arrow is clicked
    $('body,html').animate({
        scrollTop : 0                       // Scroll to top of body
    }, 500);
});

</script>

			</div>
<div class="content-fragment-footer"></div>
</div>
<div id="footer-718"></div>
<div class="content-fragment raw-html top-border with-spacing with-header responsive-1" id="footer-719">
<div class="content-fragment-header">Sophos Footer</div>
<div class="content-fragment-content">
<div class="user-defined-markup">  
<footer>
<!-- Logo and legal -->
<div id="legal">
  <div class="container clear">
            <ul>
                
            <li>
                <a href="https://community.sophos.com/kb/en-US/122482">T&amp;Cs</a>
            </li>   
        
          <li>
                <a href="https://community.sophos.com/kb/en-US/122481">Help</a>
            </li>   

            <li>
                <a href="https://www.sophos.com/en-us/legal/cookie-information.aspx">Cookie Info</a>
            </li>   
			<li>
                <a href="https://www.sophos.com/en-us/support/contact-support.aspx">Contact Support</a>
            </li>   
        
            </ul>
        
    <div id="footer-logo">
      <a href="https://www.sophos.com/en-us.aspx"><div class="footer-logo"></div></a>
    </div>
    <p>
      © 1997 - 2019 Sophos Ltd. All rights reserved.
    </p>

  </div>
</div>
</footer>
</div></div>
<div class="content-fragment-footer"></div>
</div>
</div>
</div>
</div>
<div class="layout-footer"></div>
</div></div></form><div class="footer-fragments-footer"></div>


	<script type="text/html" id="site-banner-notification-preferences-template">
		<div class="notification-preference">
			<span class="description">Do not notify me when someone <strong><%: notificationTypeName %></strong>?</span>
			<a href="#" class="confirm internal-link button submit-button" data-notificationtypeid="<%: notificationTypeId %>">Confirm</a>
			<a href="#" class="cancel internal-link button submit-button">Cancel</a>
		</div>
	</script>


	<script type="text/html" id="site-banner-list-template">
		<div>
			<div class="multiple-column-list columns-1">
				<div class="multiple-column-item column-1">
					<ul class="content-list content">
					</ul>
					<div class="loading">Loading...</div>
					<% if(footerContent) { %>
						<div class="content-list-footer">
							<%= footerContent %>
						</div>
					<% } %>
				</div>
			</div>
		</div>
	</script>


	<script type="text/html" id="site-banner-bookmark-filter-template">

		<ul class="navigation-list filter">
			<% if(contentTypeIds && contentTypeIds.length > 0) { %>
				<li class="navigation-item conversations">
					<a class="internal-link" href="#" data-contenttypeids="<%: contentTypeIds %>">Content</a>
				</li>
			<% } %>
			<% if(applicationContentTypeIds && applicationContentTypeIds.length > 0) { %>
				<li class="navigation-item conversations">
					<a class="internal-link" href="#" data-contenttypeids="<%: applicationContentTypeIds %>">Application</a>
				</li>
			<% } %>
			<% if(containerTypes && containerTypes.length > 0) { %>
				<% foreach(containerTypes, function(containerType) {  %>
					<li class="navigation-item conversations">
						<a class="internal-link" href="#" data-contenttypeids="<%: containerType.id %>"><%: containerType.name %></a>
					</li>
				<% }); %>
			<% } %>
      		</ul>

	</script>

	<script type="text/html" id="site-banner-notification-filter-template">
		<ul class="navigation-list filter">
			<li class="navigation-item all">
				<a class="internal-link" href="#" data-filter="all">All</a>
			</li>
			<li class="navigation-item unread">
				<a class="internal-link" href="#" data-filter="unread">Unread</a>
			</li>
		</ul>
	</script>

	<script type="text/html" id="site-banner-search-filter-template">
		<% if(places && places.length > 0) { %>
			<ul class="navigation-list filter">
				<% foreach(places, function(place) { %>
					<li class="navigation-item">
						<a class="place internal-link" href="#" data-key="<%: place.key %>" data-value="<%: place.value %>" data-searchparam="<%: place.searchParameter %>" data-searchvalue="<%: place.searchValue %>"><%= place.name %></a>
				<% }); %>
			</ul>
		<% } %>

		<% if(filters && filters.length > 0) { %>
			<ul class="navigation-list filter">
			<% foreach(filters, function(filter) {  %>
				<li class="navigation-item">
					<a class="type internal-link" href="#" data-key="<%: filter.key %>"><%= filter.name %></a>
				</li>
			<% }); %>
			</ul>
		<% } %>
   <% if(languages && languages.length > 0) { %>
			<ul class="navigation-list filter">
			<% foreach(languages, function(language) {  %>
				<li class="navigation-item">
					<a class="language internal-link" href="#" data-key="<%: language.key %>"><%= language.name %></a>
				</li>
			<% }); %>
			</ul>
		<% } %>   
    
	</script>

	<script type="text/html" id="site-banner-user-template">
		<div class="user">
			<div class="avatar">
				<a href="$core_v2_encoding.HtmlAttributeEncode($user.ProfileUrl)">
					<img src="/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/system-images/anonymous.gif_2D00_40x40x2.png" />
				</a>
			</div>
			<span class="user-name">
				<a href="$core_v2_encoding.HtmlAttributeEncode($user.ProfileUrl)">Anonymous</a>
			</span>
		 
					<!--<span class="oauth-provider">-->
				
					<!--</span>-->
		  
		</div>

							<ul class="navigation-list user">
																																																																																									</ul>
			</script>


	<script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/ui.js"></script>
	<script type="text/javascript">
		
		

		
						
		
		jQuery(function(){
			jQuery.telligent.evolution.widgets.siteBanner.register({
				wrapper: '#header-373',

				messagePrefix: 'widget.header-373.',
				banner: jQuery('#header-373_banner'),

				handheldSearchFieldsLink: jQuery('#header-373_handheldSearchFieldsLink'),
				handheldSearchFields: jQuery('#header-373_handheldSearchFields'),
				handheldBannerLinksLink: jQuery('#header-373_handheldBannerLinksLink'),
				handheldBannerLinks: jQuery('#header-373_handheldBannerLinks'),
				searchFields: jQuery('#header-373_searchFields'),
				bannerLinks: jQuery('#header-373_bannerLinks'),
				handheldBannerLinksCount: jQuery('#header-373_handheldBannerLinksCount'),
				bannerSiteLinks: jQuery('#header-373_bannerSiteLinks'),
				handheldSiteLinksLink: jQuery('#header-373_handheldSiteLinksLink'),
				handheldSiteLinks: jQuery('#header-373_handheldSiteLinks'),

				notificationsTemplate: 'site-banner-list-template',
				notificationsUrl: '/utility/scripted-file.ashx?_cf=notifications.vm\u0026_fid=373\u0026_ct=header\u0026_cp=\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057',
				notificationsLink: jQuery('#header-373_notifications'),
				notificationsUnread: 0,
				notificationListFooterContent: '\u003ca href=\"#\" class=\"mark-read left\"  style=\"display:none\" \u003eMark as Read\u003c/a\u003e\u003ca class=\"right\" href=\"${notificationSettingsUrl}\"\u003eSettings\u003c/a\u003e',
				notificationPreferenceTemplate: 'site-banner-notification-preferences-template',
				notificationssUnreadCountMessageSingular: 'You have {0} unread notification',
				notificationssUnreadCountMessagePlural: 'You have {0} unread notifications',
				notificationsFilterTemplate: 'site-banner-notification-filter-template',

				conversationsTemplate: 'site-banner-list-template',
				conversationsUrl: '/utility/scripted-file.ashx?_cf=conversations.vm\u0026_fid=373\u0026_ct=header\u0026_cp=\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057',
				conversationsLink: jQuery('#header-373_conversations'),
				conversationsUnread: 0,
				conversationNotificationTypeId: '84e4c0a7-3a17-4dfe-b8a0-d7038aa04a84',
				conversationListFooterContent: '\u003ca href=\"${core_v2_urls.Conversations()}\" class=\"left\"\u003eView All\u003c/a\u003e\u003ca href=\"#\" data-messagename=\"widget.header-373.startconversation\" class=\"right\"\u003eNew Message\u003c/a\u003e',
				conversationsUnreadCountMessageSingular: 'You have {0} unread message',
				conversationsUnreadCountMessagePlural: 'You have {0} unread messages',
				conversationNewConversationModalUrl: '$core_v2_encoding.JavascriptEncode($core_v2_urls.AddConversation())',

				bookmarksTemplate: 'site-banner-list-template',
				bookmarksUrl: '/utility/scripted-file.ashx?_cf=bookmarks.vm\u0026_fid=373\u0026_ct=header\u0026_cp=\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057',
				bookmarksLink: jQuery('#header-373_bookmarks'),
				bookmarksListFooterContent: '\u003ca class=\"left\" href=\"${bookmarksUrl}\"\u003eView All\u003c/a\u003e',
				bookmarksContentTypes: '$core_v2_encoding.JavascriptEncode($contentTypes)',
				bookmarksApplicationContentTypes: '$core_v2_encoding.JavascriptEncode($applicationContentTypes)',
				bookmarksContainerContentTypes: '$core_v2_encoding.JavascriptEncode($containerContentTypes)',
				bookmarksFilterTemplate: 'site-banner-bookmark-filter-template',
				bookmarksIsBookmarked:  false ,
				bookmarksCurrentContentId: '',
				bookmarksBookmarks: 'Bookmarks',
				bookmarkAdded: 'Bookmark Added',
				bookmarkRemoved: 'Bookmark Removed',

				userPopupTemplate: 'site-banner-list-template',
				userContentTemplate: 'site-banner-user-template',
				userLink: jQuery('#header-373_user'),

				searchTemplate: 'site-banner-list-template',
				searchUrl: '/utility/scripted-file.ashx?_cf=search.vm\u0026_fid=373\u0026_ct=header\u0026_cp=\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057',
				searchInput: jQuery('#header-373_Search'),
				searchFooterContent: '\u003ca data-messagename=\"widget.header-373.advancedsearch\" class=\"right\" id=\"header-373_advancedsearch\" href=\"#\"\u003eAdvanced Search\u003c/a\u003e',
				searchFilterTemplate: 'site-banner-search-filter-template',
		    searchAdvancedUrl: '/search?{0}#{1}',
				searchAdvancedUserUrl: '/members?{0}#{1}',
				searchFilterContentName: 'Everything',
				searchFilterGroupsName: 'Groups',        
        searchFilterCommunityName: 'In Community',
        searchFilterArticleName: 'In Knowledge Base',
        searchFilterDocumentName: 'In Documentation',        
				searchFilterPeopleName: 'People',
		  	searchPlaceApplicationId:  null ,
				searchPlaceApplicationName:  null ,
				searchPlaceGroupContainerId:  null ,
        searchPlaceGroupId:  null ,
        searchPlaceGroupLocalId:  null ,
				searchPlaceGroupName:  null ,
				searchPlaceAnywhereName: 'Anywhere',
        productPlaceGroupId:  null ,
				productPlaceGroupName:  null ,
				advancedSearchId: 'header-373_advancedsearch',
				searchShowPeople:  false
							});
		});
	</script>
		<script>
		jQuery(function(j){
			// no sub-nav on touch
			if(j('body').hasClass('touch'))
				return;

			var container = j('#header-500_container');
			var popup;

			function hideLinksPopup() {
				if(popup) {
					popup.glowPopUpPanel('hide');
				}
			}

			function showLinksPopUp(parent, children) {
				var links = j('<ul></ul>').append(children);
				links.on('mouseleave', function(){
					hideLinksPopup();
				});

				if(popup) {
					hideLinksPopup();
					popup.glowPopUpPanel('empty', '')
						.glowPopUpPanel('append', links)
						.glowPopUpPanel('show', parent);
				} else {
					popup = j('<div></div>')
						.glowPopUpPanel({
							cssClass: 'links-popup-panel',
							zIndex: 1500,
							hideOnDocumentClick: true
						})
						.glowPopUpPanel('append', links)
						.glowPopUpPanel('show', parent)
				}
			}

			container.on('mouseover', '.navigation-list-item a', function(e){
				var elm = j(e.target);
				var children = elm.data('_link_children');
				if(!children) {
					children = elm.closest('li').find('ul.children > li');
					elm.data('_link_children', children);
				}
				if(children && children.length > 0) {
					showLinksPopUp(elm, children);
				}
			});

			container.on('mouseout', '.navigation-list-item a', function(e){
				if(!(e.relatedTarget &&
					(j(e.relatedTarget).is('.links-popup-panel') ||
					j(e.relatedTarget).closest('.links-popup-panel').length > 0)))
					hideLinksPopup();
			});
		});
		</script>
	<script type="text/javascript">
// <![CDATA[
if (!$.telligent.evolution.contentFragmentContainers) { $.telligent.evolution.contentFragmentContainers = {}; }
$.telligent.evolution.contentFragmentContainers.header = new ContentFragmentContainerCustomCallback('ctl02_ctl01_page',new Function('mode','parameters','callback','errorCallback','context','authValue','ctl02_ctl01_ctl00._doCallback(mode+\':\'+authValue+\':\'+parameters,callback,context,errorCallback);'),'AuthorizationCookie');
// ]]>
</script>	<script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/ui(1).js"></script>
	<script type="text/javascript">
	jQuery(document).ready(function(j) {
		j.telligent.evolution.widgets.wikiPageHierarchy.register({
			hierarchy: j('#fragment-952_hierarchy'),
			topicsUrl: '/utility/scripted-file.ashx?_cf=topics.vm\u0026_fid=952\u0026_ct=page\u0026_cp=kb-view\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057',
			wrapper: '#fragment-952'
		});
	});
	</script>
	<script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/ui(2).js"></script>
	<script type="text/javascript">
	jQuery(document).ready(function(j) {
		j.sophos.widgets.feedback.register({
			wrapper: "#fragment-956",
			bodyInput: "#fragment-956_body",
			submitInput: j('#fragment-956_submit'),
      userName: "",
      errorMessage: "Please select either Yes or No.",
      successMessage: "Your feedback has been received.",
      articleId: "133057",
      language: "en-US",
			createUrl: "/utility/scripted-file.ashx?_cf=create.vm\u0026_fid=956\u0026_ct=page\u0026_cp=kb-view\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057"
		});
	});
	</script>
<script type="text/javascript">
// <![CDATA[
if (!$.telligent.evolution.contentFragmentContainers) { $.telligent.evolution.contentFragmentContainers = {}; }
$.telligent.evolution.contentFragmentContainers.page = new ContentFragmentContainerCustomCallback('ctl02_ctl02_page',new Function('mode','parameters','callback','errorCallback','context','authValue','ctl02_ctl02_ctl00._doCallback(mode+\':\'+authValue+\':\'+parameters,callback,context,errorCallback);'),'AuthorizationCookie');
// ]]>
</script>	<script type="text/javascript" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/ui(3).js"></script>
	<script type="text/javascript">
		jQuery(function(){
			jQuery.telligent.evolution.widgets.userHover.register({
				getUserInformationUrl: '/utility/scripted-file.ashx?_cf=get-user-information.vm\u0026_fid=718\u0026_ct=footer\u0026_cp=kb-view\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057',
				getRecentActivityUrl: '/utility/scripted-file.ashx?_cf=get-recent-activity.vm\u0026_fid=718\u0026_ct=footer\u0026_cp=kb-view\u0026_ctt=c6108064af6511ddb074de1a56d89593\u0026_ctc=fdfdeb449c5d41ec9984470fa5d81c33\u0026_ctn=3fc3f82483d14ec485ef92e206116d49\u0026_cc=0\u0026_pcurl=~%2Fkb%2Fen-us%2F133057'
			});
		});
	</script>
<script type="text/javascript">
// <![CDATA[
if (!$.telligent.evolution.contentFragmentContainers) { $.telligent.evolution.contentFragmentContainers = {}; }
$.telligent.evolution.contentFragmentContainers.footer = new ContentFragmentContainerCustomCallback('ctl02_ctl03_page',new Function('mode','parameters','callback','errorCallback','context','authValue','ctl02_ctl03_ctl00._doCallback(mode+\':\'+authValue+\':\'+parameters,callback,context,errorCallback);'),'AuthorizationCookie');
// ]]>
</script><script type="text/javascript">
// <![CDATA[
window.ctl02_ctl01_ctl00 = new Telligent_CallbackManager('ctl02_ctl01_ctl00','ctl02$ctl01$ctl00','ctl01');
// ]]>
</script><script type="text/javascript">
// <![CDATA[
window.ctl02_ctl02_ctl00 = new Telligent_CallbackManager('ctl02_ctl02_ctl00','ctl02$ctl02$ctl00','ctl01');
// ]]>
</script><script type="text/javascript">
// <![CDATA[
window.ctl02_ctl03_ctl00 = new Telligent_CallbackManager('ctl02_ctl03_ctl00','ctl02$ctl03$ctl00','ctl01');
// ]]>
</script>
<iframe scrolling="no" frameborder="0" allowtransparency="true" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/widget_iframe.2e9f365dae390394eb8d923cba8c5b11.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./Sophos XG Firewall v17_ How to configure an IPsec VPN between Sophos XG and an AWS Virtual Private Gateway - Sophos Community_files/saved_resource(1).html"></iframe></body></html>